const fs = require('fs');//Pacote para mexer com arquivos
const axios = require('axios');// Pacote para fazer as requisições
const path = require('path');

exports.baixarImagemDaInternet = async() => {
    nomeDaImagemBaixada = "test";
    download = await axios({
        method: 'GET',
        url: "data:image/jpeg;base64,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",
        responseType: 'stream'
    }).then((response) => {
        response.data.pipe(fs.createWriteStream(nomeDaImagemBaixada));//response é a resposta da requisição
    })
    
    const diretorioDeSalvamentoDeArquivos = '../../imagens';
    await fs.writeFile(diretorioDeSalvamentoDeArquivos + nomeDaImagemBaixada, download, function (err) {
        if (err) throw err;
        console.log('file saved');
        return response.download(path.resolve(diretorioDeSalvamentoDeArquivosCSV+filename));
    });

}

this.baixarImagemDaInternet();
